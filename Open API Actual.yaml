Openapi: 3.1.0
info:
  title: Сервис рекламного контента телеком-приложения OpenAPI спецификация
  description: API для управления рекламным контентом в личном кабинете телеком-приложения
  version: 1.0.0
  termsOfService: "https://mytelecom.com/terms"
  contact:
    name: "MyTelecom API"
    url: "https://mytelecom.com/api"
    email: "mytelecom@gmail.com"
  license:
    name: "CC Attribution-ShareAlike 4.0 (CC BY-SA 4.0)"
    url: "https://mytelecom.org/price"
servers:
  - url: https://api.mytelecom.com/v1/personal_cabinet
    description: Production server
paths:
  /contents:
    post:
      summary: Метод добавления рекламного контента
      description: Метод позволяет добавить рекламный контент
      tags:
        - content
      parameters:
        - in: header
          name: idempotency_key
          description: Ключ идемпотентности
          required: true
          schema:
            type: string
            format: uuid
          example: 3e578425-3b80-496e-b2c9-3e61ad768014
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ContentRq'
      responses:
        201:
          description: Элемент создан
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ContentRs'
        400:
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        404:
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        409:
          description: Conflict
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    get:
      summary: Метод получения всего рекламного контента c пагинацией
      description: Возвращает весь доступный рекламный контент, используя пагинацию
      tags:
          - content
      parameters:
        - name: limit
          in: query
          description: Количество рекламного контента на странице
          schema:
            type: integer
            default: 10
        - name: offset
          in: query
          schema:
            type: integer
            default: 0
          description: Количество элементов, которые надо пропустить перед началом пагинации
      responses:
        200:
          description: Получение всего рекламного контента
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ContentRs'
        404:
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /contents/{content_id}:
    get:
      summary: Метод получения определенного рекламного контента
      description: Возвращает определенный рекламный контент
      tags:
        - content
      parameters:
        - name: content_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Уникальный идентификатор рекламного контента
          example: 3e578425-3b80-496e-b2c9-3e61ad768014
      responses:
        200:
          description: Получение определенного рекламного контента
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ContentRs'
        404:
          description: Not found
          content:
            schema:
              $ref: '#/components/schemas/Error'
    delete:
      summary: Метод удаления рекламного контента
      description: Метод позволяет удалить рекламный контент
      tags:
        - content
      parameters:
        - name: content_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Уникальный идентификатор рекламного контента
          example: 3e578425-3b80-496e-b2c9-3e61ad768014
      responses:
        204:
          description: Элемент удален
        404:
          description: Not found
          content:
            text/plain:
              schema:
                $ref: '#/components/schemas/Error'
components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    ContentRq:
      type: object
      required: [type_id, file_id, start_date, end_date]
      properties:
        type_id:
          type: integer
          description: Тип рекламного контента
          example: баннер
        file_id:
          type: integer
          description: Уникальный идентификатор файла
          example: 3e578425-3b80-496e-b2c9-3e61ad768014
        start_date:
          type: string
          description: Дата начала показа рекламного контента
          example: 2025-11-11T09:50:00Z
        end_date:
          type: string
          description: Дата окончания показа рекламного контента
          example: 2025-12-11T09:50:00Z
    ContentRs:
      type: object
      description: Рекламный контент
      required: [content_id, type_id, file_id, start_date, end_date]
      properties:
        content_id:
          type: integer
          description: Уникальный идентификатор рекламного контента
          example: 3e578425-3b80-496e-b2c9-3e61ad768014
        type_id:
          type: integer
          description: Тип рекламного контента
          example: баннер
        file_id:
          type: integer
          description: Уникальный идентификатор файла
          example: 3e578425-3b80-496e-b2c9-3e61ad768014
        start_date:
          type: string
          description: Дата начала показа рекламного контента
          example: 2025-11-11T09:50:00Z
        end_date:
          type: string
          description: Дата окончания показа рекламного контента
          example: 2025-12-11T09:50:00Z
    Error:
      type: object
      properties:
        message:
          title: Not found
          type: string
          description: Описание ошибки
          example: Элемент не найден


